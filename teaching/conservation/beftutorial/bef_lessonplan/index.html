<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.55.6" />
    <meta name="description" content="">
<meta name="author" content="Mairin">

    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>BIOL 416 R Tutorial 5 - Biodiversity-ecosystem function in plant communities :: Mairin Deith</title>

    
    <link href="/css/nucleus.css?1558662433" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1558662433" rel="stylesheet">
    <link href="/css/hybrid.css?1558662433" rel="stylesheet">
    <link href="/css/featherlight.min.css?1558662433" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1558662433" rel="stylesheet">
    <link href="/css/auto-complete.css?1558662433" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1558662433" rel="stylesheet">
    <link href="/css/theme.css?1558662433" rel="stylesheet">
    <link href="/css/hugo-theme.css?1558662433" rel="stylesheet">
    
      <link href="/css/theme-mine.css?1558662433" rel="stylesheet">
    

    <script src="/js/jquery-3.3.1.min.js?1558662433"></script>

    <style type="text/css">
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/teaching/conservation/beftutorial/bef_lessonplan/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/">

	<img src="/images/logo_text_tall_svg.png" alt="Logo" height="90%" width="90%">

</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1558662433"></script>
<script type="text/javascript" src="/js/auto-complete.js?1558662433"></script>
<script type="text/javascript">
    
        var baseurl = "\/";
    
</script>
<script type="text/javascript" src="/js/search.js?1558662433"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/projects/" title="Research Projects" class="dd-item 
        
        
        
        ">
      <a href="/projects/">
          <b><i class='fas fa-terminal'> </i>      </b>Research Projects
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/projects/spatial_mapping/" title="Spatial Mapping of Bushmeat Hunting" class="dd-item 
        
        
        
        ">
      <a href="/projects/spatial_mapping/">
          <b><i class='fas fa-layer-group'> </i>   </b>Spatial Mapping of Bushmeat Hunting
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/projects/decision_making/" title="Bayesian Decision Analysis" class="dd-item 
        
        
        
        ">
      <a href="/projects/decision_making/">
          <b><i class='fas fa-project-diagram'> </i>   </b>Bayesian Decision Analysis
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/projects/simulations/" title="MSE for Sustainable Harvests" class="dd-item 
        
        
        
        ">
      <a href="/projects/simulations/">
          <b><i class='fas fa-tasks'> </i>   </b>MSE for Sustainable Harvests
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/projects/simulations/redfish/" title="Canadian Atlantic Redfish" class="dd-item 
        
        
        
        ">
      <a href="/projects/simulations/redfish/">
          Canadian Atlantic Redfish
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/projects/simulations/stonessheep/" title="Stone&#39;s Sheep" class="dd-item 
        
        
        
        ">
      <a href="/projects/simulations/stonessheep/">
          Stone&#39;s Sheep
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/projects/simulations/shiny_pva/" title="PVA&#43;Shiny for Invasive Species Eradication" class="dd-item 
        
        
        
        ">
      <a href="/projects/simulations/shiny_pva/">
          <b><i class='far fa-times-circle'> </i>   </b>PVA&#43;Shiny for Invasive Species Eradication
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/teaching/" title="Teaching" class="dd-item 
        parent
        
        
        ">
      <a href="/teaching/">
          <b><i class='fas fa-apple-alt'> </i>   </b>Teaching
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/teaching/code_for_all/" title="Coding for the Masses" class="dd-item 
        
        
        
        ">
      <a href="/teaching/code_for_all/">
          <b><i class='fab fa-python'> </i>   </b>Coding for the Masses
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/teaching/conservation/" title="Ecology &amp; Conservation" class="dd-item 
        parent
        
        
        ">
      <a href="/teaching/conservation/">
          <b><i class='fab fa-envira'> </i>   </b>Ecology &amp; Conservation
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/teaching/conservation/beftutorial/biol416_befanalysis_assignmentinstructions.nb/" title="" class="dd-item ">
        <a href="/teaching/conservation/beftutorial/biol416_befanalysis_assignmentinstructions.nb/">
        
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/teaching/conservation/beftutorial/biol416_befanalysis_assignmentinstructions/" title="BIOL 416 Assignment 1" class="dd-item ">
        <a href="/teaching/conservation/beftutorial/biol416_befanalysis_assignmentinstructions/">
        BIOL 416 Assignment 1
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/teaching/conservation/intror/biol416_introduction_to_r_notes/" title="BIOL 416 R Tutorial 1 - Introduction to R" class="dd-item ">
        <a href="/teaching/conservation/intror/biol416_introduction_to_r_notes/">
        BIOL 416 R Tutorial 1 - Introduction to R
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/teaching/conservation/intror/biol416_tutorial2_intror/" title="BIOL 416 R Tutorial 1 - Introduction to R" class="dd-item ">
        <a href="/teaching/conservation/intror/biol416_tutorial2_intror/">
        BIOL 416 R Tutorial 1 - Introduction to R
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/teaching/conservation/12.12.2018.biol416.rphylotutorial_post/" title="BIOL 416 R Tutorial 2 - Phylogenies in R" class="dd-item ">
        <a href="/teaching/conservation/12.12.2018.biol416.rphylotutorial_post/">
        BIOL 416 R Tutorial 2 - Phylogenies in R
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/teaching/conservation/phylo/12.12.2018.biol416.rphylotutorial/" title="BIOL 416 R Tutorial 2 - Phylogenies in R" class="dd-item ">
        <a href="/teaching/conservation/phylo/12.12.2018.biol416.rphylotutorial/">
        BIOL 416 R Tutorial 2 - Phylogenies in R
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/teaching/conservation/phylo/12.12.2018.biol416.rphylotutorial_post/" title="BIOL 416 R Tutorial 2 - Phylogenies in R" class="dd-item ">
        <a href="/teaching/conservation/phylo/12.12.2018.biol416.rphylotutorial_post/">
        BIOL 416 R Tutorial 2 - Phylogenies in R
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/teaching/conservation/phylo/biol416_tutorial3_phylogeneticsr/" title="BIOL 416 R Tutorial 2 - Phylogenies in R" class="dd-item ">
        <a href="/teaching/conservation/phylo/biol416_tutorial3_phylogeneticsr/">
        BIOL 416 R Tutorial 2 - Phylogenies in R
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/teaching/conservation/beftutorial/bef_lessonplan/" title="BIOL 416 R Tutorial 5 - Biodiversity-ecosystem function in plant communities" class="dd-item active">
        <a href="/teaching/conservation/beftutorial/bef_lessonplan/">
        BIOL 416 R Tutorial 5 - Biodiversity-ecosystem function in plant communities
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/teaching/conservation/beftutorial/biol416_tutorial5_bef_instructions/" title="BIOL 416 R Tutorial 5 - Biodiversity-ecosystem function in plant communities" class="dd-item ">
        <a href="/teaching/conservation/beftutorial/biol416_tutorial5_bef_instructions/">
        BIOL 416 R Tutorial 5 - Biodiversity-ecosystem function in plant communities
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/teaching/conservation/beftutorial/phylo/biol416_bef_phylogeneticslessonplan/" title="BIOL 416 R Tutorial 5 - Biodiversity-ecosystem function in plant communities" class="dd-item ">
        <a href="/teaching/conservation/beftutorial/phylo/biol416_bef_phylogeneticslessonplan/">
        BIOL 416 R Tutorial 5 - Biodiversity-ecosystem function in plant communities
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/teaching/conservation/beftutorial/phylo/biol416_tutorial6_befpd_instructions/" title="BIOL 416 R Tutorial 6 - Biodiversity-ecosystem function in plant communities pt. 2: Phylogenies" class="dd-item ">
        <a href="/teaching/conservation/beftutorial/phylo/biol416_tutorial6_befpd_instructions/">
        BIOL 416 R Tutorial 6 - Biodiversity-ecosystem function in plant communities pt. 2: Phylogenies
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/teaching/conservation/beftutorial/phylo/biol416_tutorial6_befpd_instructions_x/" title="BIOL 416 R Tutorial 6 - Biodiversity-ecosystem function in plant communities pt. 2: Phylogenies" class="dd-item ">
        <a href="/teaching/conservation/beftutorial/phylo/biol416_tutorial6_befpd_instructions_x/">
        BIOL 416 R Tutorial 6 - Biodiversity-ecosystem function in plant communities pt. 2: Phylogenies
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/teaching/conservation/beftutorial/phylo/13.02.2019_assignmentannouncement/" title="Common bugs" class="dd-item ">
        <a href="/teaching/conservation/beftutorial/phylo/13.02.2019_assignmentannouncement/">
        Common bugs
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/post/" title="Posts &amp; Tutorials" class="dd-item 
        
        
        
        ">
      <a href="/post/">
          <b><i class='far fa-newspaper'> </i>   </b>Posts &amp; Tutorials
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
             
            
          
            
            


 
  
    
      <li data-nav-id="/post/2015-07-23-r-rmarkdown/" title="Hello R Markdown" class="dd-item ">
        <a href="/post/2015-07-23-r-rmarkdown/">
        Hello R Markdown
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
             
            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/about/" title="About" class="dd-item 
        
        
        
        ">
      <a href="/about/">
          <b><i class='far fa-smile'> </i>   </b>About
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/about/_index0/" title="" class="dd-item ">
        <a href="/about/_index0/">
        
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="mailto:mairin.deith@gmail.com"><i class='fas fa-fw fa-envelope'></i> Email</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://github.com/mairindeith"><i class='fab fa-fw fa-github'></i> Github</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://twitter.com/sapiensimulator"><i class='fab fa-twitter'></i> Twitter</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
      
      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      <center>
    <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>
</center>

<script async defer src="https://buttons.github.io/buttons.js"></script>

    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            
            
          
          
            <a href='/'></a> > <a href='/teaching/'>Teaching</a> > <a href='/teaching/conservation/'>Ecology & Conservation</a> > BIOL 416 R Tutorial 5 - Biodiversity-ecosystem function in plant communities
          
         
          
         
          
         
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">

    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              BIOL 416 R Tutorial 5 - Biodiversity-ecosystem function in plant communities
            </h1>
          

        






<div id="spiel" class="section level2">
<h2>Spiel</h2>
<p>We want species around so we can support ecosystem functioning - more diverse, species-rich communities support more ecological functions</p>
<p>Much debate, then supported by small experimental plots that differ by SR of plots (monocultures to 14 different species)</p>
<p>If species occupy diff niches, when you put them together the ecosystem in the plot = max niche usage = carbon fixed through photosynthesis, plant growth</p>
<p>More takeup/utilization of resources = more biomass
Measure of ECOSYSTEM FUNCTION, often in g of carbon/m2</p>
<p>Slide 1:
Saturating relationship (e.g. N being removed from the soil, plateaus)</p>
<p>We would expect this to level out - 7 or 8 represents that there are 7 or 8 unique niches.
Maximum niches? Could be a way of indicating the dimensions of that ONE NICHE (1-D niche space)</p>
<p>More species = competing for the same resource, fewer allows for species to find their own unique niche space</p>
<p>2 explanations:</p>
<ol style="list-style-type: decimal">
<li><p>Occupancy of niche space - species better cover the total niche space, each circle = occupancy in niche space (multiple dimensions)</p></li>
<li><p>Selection effect - species with higher than average monoculture yields dominate the mixture (aka. sampling effect) –&gt; due to chance</p></li>
</ol>
<p>Lots of debate over which method is true - there always seemed to be a tend towards higher productivity in more speciose communities</p>
<p>Papers by mathematicians realized you can partition the variation in productivity into these two components - quantify what proportion can be attributed to complementarity and selection
Complementarity = species yields higher than the average monoculture yield</p>
<p>Now what if we turn this on its head, so we’re losing species instead of gaining them:</p>
<ol style="list-style-type: decimal">
<li><p>Rivet hypothesis - ecosystems seem okay for a time, but there’s some species that keeps it all together; at some point the wings fall off but we don’t know which rivets are important (e.g. planetary boundaries, tipping point - where is it, how do we know?)</p></li>
<li><p>Drivers and passengers more like the driver/passenger effect - keystone species idea; more productive systems more likely to sample species with high functioning</p></li>
</ol>
<p>Varies across space, and across ecosystem types (e.g. Greece - water limitation)</p>
<p>Different shapes:</p>
<ol style="list-style-type: decimal">
<li>Rivet hypothesis</li>
<li>Catastrophic loss - every species is critical, removing one of those ‘cogs’ makes the system ineffective (<strong>different trophic levels tend to show different relationships</strong>)</li>
<li>Proportional - complementarity effect</li>
</ol>
</div>
<div id="exercise" class="section level2">
<h2>Exercise</h2>
<p>The purpose of this tutorial is to investigate how the <strong>species richness</strong> of plant communities influences the <strong>average biomass produced</strong> by those communities.</p>
<p>What ecological process can best explain that model?</p>
</div>
<div id="setting-up-the-analysis" class="section level2">
<h2>Setting up the analysis</h2>
<div id="set-the-working-directory" class="section level3">
<h3>Set the working directory</h3>
<p>We need to tell R where to find the BEF files.
This is possible by changing the <strong>working directory</strong>, the location on your computer’s file system where R will run commands.</p>
<p><em>Hint: Try using Tab to autocomplete the file path - this is helpful if you don’t know exactly what your folders are named</em>.</p>
<pre class="r"><code># For Unix (MacOS and Linux), it&#39;s safe to start from your home directory:
setwd(&quot;~/Documents/Teaching/416_Spring19/Tutorials/BEFTutorial/&quot;)

# For Windows users, it&#39;s safest to start at the C: drive and go from there:
setwd(&quot;C:/...&quot;)</code></pre>
</div>
<div id="load-the-csv" class="section level3">
<h3>Load the csv</h3>
<pre class="r"><code>bef.data &lt;- read.csv(&quot;BEF2.csv&quot;, header=TRUE)</code></pre>
<p>Notice that we provide a new argument to this <code>read.csv()</code> call that we didn’t use last week: <code>header = TRUE</code>. If we look at the csv file, notice that the first line contains column names.</p>
<p>When we first read in the csv, we can tell R to assign column names to the data frame based on the first row of data in the csv file.</p>
</div>
<div id="examine-the-bef-data" class="section level3">
<h3>Examine the BEF data</h3>
<p>Let’s take a look at the data we just read into R.</p>
<pre class="r"><code>head(bef.data)</code></pre>
<pre><code>##   Year Plot Achmi Agrsm Amoca Petca Andge Asctu Elyca Koecr Lesca Liaas
## 1 2001   X2     0     0     0     0     0     0     0     0     1     0
## 2 2001   X3     0     0     0     0     0     1     0     0     0     1
## 3 2001   X5     0     0     0     0     1     0     0     0     0     0
## 4 2001   X6     0     0     0     0     0     0     0     0     0     0
## 5 2001   X9     1     1     1     1     1     1     1     0     1     1
## 6 2001  X11     1     0     0     0     0     0     0     0     0     0
##   Luppe Monfi Solri Panvi Petpu Poapr Schsc Sornu AbvBioAnnProd
## 1     0     0     0     0     0     0     0     0       139.350
## 2     0     1     1     1     0     0     0     0        80.629
## 3     0     0     0     0     0     0     0     0        43.071
## 4     0     0     0     1     0     0     1     0        59.108
## 5     1     1     1     1     1     1     1     1       281.808
## 6     0     0     0     0     0     0     0     0       146.750</code></pre>
<p>We can see that our data frame contains columns for:</p>
<ul>
<li>years of observations</li>
<li>a plot ID (for each unique sample plot)</li>
<li>each species, where the presence of that species is indicated with a <code>1</code>; absence with a <code>0</code>
<ul>
<li>There are 17 possible species listed in columns 3 to 20</li>
</ul></li>
</ul>
<pre class="r"><code>colnames(bef.data)[3:20]</code></pre>
<pre><code>##  [1] &quot;Achmi&quot; &quot;Agrsm&quot; &quot;Amoca&quot; &quot;Petca&quot; &quot;Andge&quot; &quot;Asctu&quot; &quot;Elyca&quot; &quot;Koecr&quot;
##  [9] &quot;Lesca&quot; &quot;Liaas&quot; &quot;Luppe&quot; &quot;Monfi&quot; &quot;Solri&quot; &quot;Panvi&quot; &quot;Petpu&quot; &quot;Poapr&quot;
## [17] &quot;Schsc&quot; &quot;Sornu&quot;</code></pre>
</div>
</div>
<div id="analysis-overview" class="section level2">
<h2>Analysis Overview</h2>
<p>To determine if there is a significant relationship between species richness and biomass production in plant communities:</p>
<ol style="list-style-type: lower-alpha">
<li>Calculate richness and mean biomass in each community</li>
<li><p>Run a linear regression of both:
<span class="math display">\[Biomass \sim m * Richness + b\]</span>
<span class="math display">\[Biomass \sim m * ln(Richness) + b\]</span>
…where <span class="math inline">\(m\)</span> is the coefficient/slope for <span class="math inline">\(Richness\)</span> and <span class="math inline">\(b\)</span> is the y-intercept of the linear regression.</p></li>
<li><p>Interpret and plot the results of (b)</p></li>
</ol>
</div>
<div id="step-by-step-instructions" class="section level2">
<h2>Step-by-step instructions</h2>
<div id="the-first-plot---calculate-sr-and-biomass" class="section level3">
<h3>The first plot - calculate SR and biomass</h3>
<ol style="list-style-type: decimal">
<li>Start with just one plot, <code>X2</code>. Create a data frame that contains only the observations for that one plot with <code>subset()</code>:</li>
</ol>
<pre class="r"><code>sub.data&lt;-subset(bef.data,Plot==&#39;X2&#39;)</code></pre>
<ol start="2" style="list-style-type: decimal">
<li><p>Count how many species are in that plot. There are a couple ways you could do this:</p>
<ol style="list-style-type: lower-alpha">
<li>Create a new data frame that only includes species with a <code>1</code> in the observation table, then count the number of species columns in that data frame</li>
</ol></li>
</ol>
<pre class="r"><code># Isolate the species in the list
species &lt;- sub.data[,3:20]

# Find the species present
spp &lt;- colnames(species)[species[1,]==1]
species.richness &lt;- length(spp)</code></pre>
<pre><code>b. Sum across each row to get species richness in each year</code></pre>
<pre class="r"><code># Isolate the species in the list
species &lt;- sub.data[,3:20]

# Sum across (the first year, all years have the same SR)
species.richness &lt;- sum(species[1,])</code></pre>
<ol start="3" style="list-style-type: decimal">
<li>Calculate the average biomass (mean across years) in each plot</li>
</ol>
<pre class="r"><code>mean.biomass &lt;- mean(sub.data$AbvBioAnnProd)</code></pre>
</div>
<div id="iterate-over-all-plots-with-a-for-loop" class="section level3">
<h3>Iterate over all plots with a <code>for</code> loop</h3>
<ol start="4" style="list-style-type: decimal">
<li><p>We could repeat steps 1-3 for all plots one-at-a-time, but we can use a programming technique called loops to automatically apply the code we wrote for the first plot to all plots in the study.</p>
<ol style="list-style-type: lower-alpha">
<li>Create a data frame to store the final results in</li>
</ol></li>
</ol>
<pre class="r"><code># First, create a list of all plots

plots &lt;- unique(bef.data$Plot)

plot.data &lt;- data.frame(
  plot = plots,
  richness = NA,
  biomass = NA
)</code></pre>
<pre><code>b. Write a for loop that calculates SR and biomass for each plot individually, then put the results into the data results data frame</code></pre>
<pre class="r"><code># Just like the code above, but tucked within a for loop
for(i in 1:length(plots)){
  p &lt;- plots[i]
  plot.subset &lt;- subset(bef.data, Plot==p)
  plot.species &lt;- plot.subset[,3:20]
  
  # Calculate species richness at the start of the time series
  plot.sr &lt;- sum(plot.species[1,])
  
  # Calculate mean biomass across the time series
  plot.biomass &lt;- mean(plot.subset$AbvBioAnnProd)
  
  plot.data[i,&quot;richness&quot;] &lt;- plot.sr
  plot.data[i,&quot;biomass&quot;] &lt;- plot.biomass
}</code></pre>
</div>
<div id="linear-regressions-and-plotting" class="section level3">
<h3>Linear regressions and plotting</h3>
<ol start="5" style="list-style-type: decimal">
<li><p>Construct and interpret a linear model that looks at:</p>
<ol style="list-style-type: lower-alpha">
<li>Biomass as a function of species richness</li>
</ol></li>
</ol>
<pre class="r"><code>model &lt;- lm(biomass ~ richness, data = plot.data)
summary(model)</code></pre>
<pre><code>## 
## Call:
## lm(formula = biomass ~ richness, data = plot.data)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -154.64  -60.50  -12.21   49.35  225.06 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  135.553      9.261   14.64   &lt;2e-16 ***
## richness      12.228      1.099   11.13   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 81.11 on 164 degrees of freedom
## Multiple R-squared:  0.4302, Adjusted R-squared:  0.4267 
## F-statistic: 123.8 on 1 and 164 DF,  p-value: &lt; 2.2e-16</code></pre>
<pre><code>b. Biomass as a function of ln-transformed species richness</code></pre>
<pre class="r"><code># This will result in an error:
model.log &lt;- lm(biomass ~ log(richness), data = plot.data)</code></pre>
<pre><code>## Error in lm.fit(x, y, offset = offset, singular.ok = singular.ok, ...): NA/NaN/Inf in &#39;x&#39;</code></pre>
<p>The error here is because we are trying to take the natural logarithm of 0, which results in infinity.
You can’t regress against infinity, so we need to only select those plots that have at least 1 species in it</p>
<pre class="r"><code>which(plot.data$richness == 0) # Five sites have no species</code></pre>
<pre><code>## [1]  71  76 106 122 141</code></pre>
<pre class="r"><code>plot.data.log &lt;- subset(plot.data, richness &gt; 0)</code></pre>
<pre class="r"><code>model.log &lt;- lm(biomass ~ log(richness), data = plot.data.log)
summary(model.log)</code></pre>
<pre><code>## 
## Call:
## lm(formula = biomass ~ log(richness), data = plot.data.log)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -184.18  -49.13  -14.63   49.67  235.20 
## 
## Coefficients:
##               Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)    111.056     10.353   10.73   &lt;2e-16 ***
## log(richness)   73.031      6.032   12.11   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 77.89 on 159 degrees of freedom
## Multiple R-squared:  0.4797, Adjusted R-squared:  0.4764 
## F-statistic: 146.6 on 1 and 159 DF,  p-value: &lt; 2.2e-16</code></pre>
<ol start="6" style="list-style-type: decimal">
<li>Plot each of these relationships</li>
</ol>
<pre class="r"><code>plot(x = plot.data$richness, 
     y = plot.data$biomass, 
     ylab = &quot;Biomass (g/m2)&quot;,
     xlab = &quot;Species richness&quot;)
abline(model)</code></pre>
<p><img src="/teaching/conservation/BEFTutorial/BEF_LessonPlan_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<pre class="r"><code>plot(x = log(plot.data.log$richness), 
     y = plot.data.log$biomass, 
     ylab = &quot;Biomass (g/m2)&quot;,
     xlab = &quot;ln(Species Richness)&quot;)
abline(model.log)</code></pre>
<p><img src="/teaching/conservation/BEFTutorial/BEF_LessonPlan_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
<ol start="7" style="list-style-type: decimal">
<li>Interpret these relationships - what do the coefficients and intercepts tell us about species richness and how it influences biomass production?</li>
</ol>
</div>
<div id="comparing-models-with-r2" class="section level3">
<h3>Comparing models with R2</h3>
<ol start="8" style="list-style-type: decimal">
<li>Compare the ability of the ln-transformed and untransformed species richness to predict biomass production.</li>
</ol>
<p><strong>Hint: you can do this by considering the <code>Multiple R-squared</code> object in our linear model.</strong></p>
<p>R2 is a measure of how much variation in the data is not explained by the linear relationship we just made.
It tells us how much information about <span class="math inline">\(y\)</span>, in this case <code>biomass</code>, can be explained if we know what <span class="math inline">\(x\)</span>, <code>richness</code>, is.</p>
<p><span class="math display">\[r^2 = 1 - \frac{SS_{reg}}{SS_{tot}}\]</span></p>
<div class="figure">
<img src="https://d2jmvrsizmvf4x.cloudfront.net/Yf5q7liBRKrDmFPk2PWA_Fit%2520of%2520linear%2520regression.gif" alt="Here’s a visual example" />
<p class="caption">Here’s a visual example</p>
</div>
<p>A higher R2 means that more of the variation we see in biomass can be attributed to that measure of richness, so we can say that the mathematical relationship with a higher R2 is a stronger description of what’s going on in these study plots.</p>
</div>
</div>


<footer class=" footline" >
	
</footer>


        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/teaching/conservation/phylo/biol416_tutorial3_phylogeneticsr/" title="BIOL 416 R Tutorial 2 - Phylogenies in R"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/teaching/conservation/beftutorial/biol416_tutorial5_bef_instructions/" title="BIOL 416 R Tutorial 5 - Biodiversity-ecosystem function in plant communities" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1558662433"></script>
    <script src="/js/perfect-scrollbar.min.js?1558662433"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1558662433"></script>
    <script src="/js/jquery.sticky.js?1558662433"></script>
    <script src="/js/featherlight.min.js?1558662433"></script>
    <script src="/js/html5shiv-printshiv.min.js?1558662433"></script>
    <script src="/js/highlight.pack.js?1558662433"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1558662433"></script>
    <script src="/js/learn.js?1558662433"></script>
    <script src="/js/hugo-learn.js?1558662433"></script>

    <link href="/mermaid/mermaid.css?1558662433" type="text/css" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1558662433"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

